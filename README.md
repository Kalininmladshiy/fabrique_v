# Сервис fabrique_v

Данный сервис предназначен для осуществления массовых рассылок сообщений клиентам с помощью [API внешнего сервиса отправки](https://probe.fbrq.cloud/docs#/send/sendMsg). Данный сервис реализован на базе Django и предоставляет пользователю возможность добавлять рассылки, адресатов, теги через панель администратора.

## Установка:

### 1. Копируем содержимое проекта себе в рабочую директорию

### 2. Разворачиваем внутри скопированного проекта виртуальное окружение:
```
python -m venv <название виртуального окружения>
```

### 3. Устанавливаем библиотеки:
```
pip install -r requirements.txt
```

### 4. Для хранения переменных окружения создаем файл .env:
```
touch .env
```
Генерируем секретный ключ DJANGO в интерактивном режиме python:
* `python`
* `import django`
* `from django.core.management.utils import get_random_secret_key`
* `print(get_random_secret_key())`
    
Копируем строку в `.env` файл: `DJANGO_KEY='ваш ключ'` 

Добавляем токен внешнего сервиса рассылок в `.env` файл: `TOKEN_SENDER='ваш токен'`

### 5. Переходим в директорию проекта и выполняем миграции в ДБ: 
```
cd notification_service/

python manage.py makemigrations

python manage.py migrate
```

## Использование:

### 1. Создаем панель администратора:

```
python manage.py createsuperuser
```


### 2. Запускаем сервер:

```
python manage.py runserver
```


### 3. Переходим на http://127.0.0.1:8000/ и видим подсказку для перехода в панель администратора:

![изображение](https://user-images.githubusercontent.com/106922768/202017551-4269cb2e-3768-4351-acfb-2484c5efcb59.png)

### 4. Переходим на http://127.0.0.1:8000/admin/ и видим модели рассылки и получателей, которые нам необходимо создать:

![изображение](https://user-images.githubusercontent.com/106922768/202017980-dfbbc09d-562f-459a-9b27-2827a1b186f0.png)

### 5. Создаем рассылки и заносим получателей:
![изображение](https://user-images.githubusercontent.com/106922768/202018192-1c8f6ca1-d504-48fa-9ea8-6805f50a63df.png)

### 6. после создания запускаем сервис:
```
python manage.py service
```

В панели администратора создадутся отправленные сообщения, которые можно фильтровать по тому успешно ли прошла отправка. Данные об этом получаем из ответа стороннего сервиса рассылки.

![изображение](https://user-images.githubusercontent.com/106922768/202018728-1d836e29-302b-41c1-aded-fe3c96ab2195.png)

## Цели проекта

Код написан в тестовых целях на вакансию компании [Фабрика решений](https://fabrique.studio/). 
